<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>No Pass!</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.1/css/bulma.min.css">
</head>
<body>
    <!-- <div id="container"></div> -->
    <script src="build/main.js"></script>
    <script>

let crypto = window.crypto || window.msCrypto;

let getRandomInt = () => {
    // get two cryptographically secure random ints
    var randInts = new Uint32Array(2);
    crypto.getRandomValues(randInts);


    // convert the two 32 bit ints to one 53 bit int (since that's the max number of bits for javascript ints)
    // taken from https://github.com/heap/cryptohat/blob/v1.0.1/index.js#L194
    let mask = Math.pow(2, 53 - 32) - 1;
    // NOTE: 4294967296 is Math.pow(2, 32). We inline the number to give V8 a
    //       better chance to implement the multiplication as << 32.
    return randInts[0] + (randInts[1] & mask) * 4294967296;
}



// var node = document.getElementById('container');
var app = Elm.Main.fullscreen({ initialSeed: getRandomInt() });

/*app.ports.outPort.subscribe((it) => {
    console.log(it);
    console.log(it.kind);
    if (it.kind == "GetNewRandom") {
        app.ports.inPort.send({ kind: "GetRandomInt", randInt: getRandomInt() });
    } else {
        console.log("command ignored: ", it);
    }
});*/

    </script>
</body>
</html>
